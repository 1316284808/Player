<Window x:Class="Player.Helpers.ColorPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="选择主题色" 
        Height="400" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource SecondaryLightBrush}">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Grid.Row="0" 
                   Text="选择你喜欢的主题色" 
                   FontSize="18" 
                   FontWeight="Bold" 
                   Foreground="{DynamicResource PrimaryBrush}"
                   Margin="0,0,0,20"/>
        
        <!-- 颜色选择区域 -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="10" 
                Padding="15"
                BorderBrush="{DynamicResource PrimaryBrush}"
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 预设颜色 -->
                <StackPanel Grid.Row="0">
                    <TextBlock Text="预设主题色：" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource PrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <WrapPanel>
                        <Button Width="50" Height="50" Margin="5" Background="#7B68EE" Click="PresetColor_Click" Tag="#7B68EE" ToolTip="紫罗兰">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            CornerRadius="25" 
                                            BorderThickness="2"
                                            BorderBrush="Transparent"
                                            x:Name="border">
                                        <Border.Effect>
                                            <DropShadowEffect BlurRadius="5" ShadowDepth="2" Opacity="0.3"/>
                                        </Border.Effect>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="BorderBrush" Value="White"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <Button Width="50" Height="50" Margin="5" Background="#2196F3" Click="PresetColor_Click" Tag="#2196F3" ToolTip="蓝色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#4CAF50" Click="PresetColor_Click" Tag="#4CAF50" ToolTip="绿色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#FF9800" Click="PresetColor_Click" Tag="#FF9800" ToolTip="橙色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#F44336" Click="PresetColor_Click" Tag="#F44336" ToolTip="红色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#9C27B0" Click="PresetColor_Click" Tag="#9C27B0" ToolTip="紫色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#00BCD4" Click="PresetColor_Click" Tag="#00BCD4" ToolTip="青色"/>
                        <Button Width="50" Height="50" Margin="5" Background="#FFEB3B" Click="PresetColor_Click" Tag="#FFEB3B" ToolTip="黄色"/>
                    </WrapPanel>
                </StackPanel>
                
                <!-- 分隔线 -->
                <Border Grid.Row="1" Height="1" Background="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Margin="0,10"/>
                
                <!-- 自定义颜色 -->
                <StackPanel Grid.Row="2">
                    <TextBlock Text="自定义颜色：" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource PrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="颜色值：" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBox x:Name="ColorTextBox" 
                                 Grid.Column="1" 
                                 Text="#7B68EE" 
                                 VerticalAlignment="Center"
                                 Padding="8"
                                 FontFamily="Consolas"
                                 FontSize="14"
                                 BorderBrush="{DynamicResource PrimaryBrush}"
                                 TextChanged="ColorTextBox_TextChanged"/>
                        <Rectangle x:Name="ColorPreview" 
                                   Grid.Column="2" 
                                   Width="50" 
                                   Height="35" 
                                   Fill="#7B68EE" 
                                   Stroke="{DynamicResource PrimaryBrush}"
                                   StrokeThickness="1"
                                   RadiusX="5"
                                   RadiusY="5"
                                   Margin="10,0,0,0"/>
                    </Grid>
                </StackPanel>
                
                <!-- RGB 滑块 -->
                <StackPanel Grid.Row="4">
                    <TextBlock Text="RGB 调节：" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource PrimaryBrush}"
                               Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- R -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="R" Foreground="#F44336" VerticalAlignment="Center"/>
                        <Slider x:Name="RedSlider" Grid.Row="0" Grid.Column="1" Minimum="0" Maximum="255" Value="123" 
                                Margin="10,5" ValueChanged="RgbSlider_ValueChanged"/>
                        <TextBlock x:Name="RedValue" Grid.Row="0" Grid.Column="2" Text="123" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        
                        <!-- G -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="G" Foreground="#4CAF50" VerticalAlignment="Center"/>
                        <Slider x:Name="GreenSlider" Grid.Row="1" Grid.Column="1" Minimum="0" Maximum="255" Value="104" 
                                Margin="10,5" ValueChanged="RgbSlider_ValueChanged"/>
                        <TextBlock x:Name="GreenValue" Grid.Row="1" Grid.Column="2" Text="104" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                        
                        <!-- B -->
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="B" Foreground="#2196F3" VerticalAlignment="Center"/>
                        <Slider x:Name="BlueSlider" Grid.Row="2" Grid.Column="1" Minimum="0" Maximum="255" Value="238" 
                                Margin="10,5" ValueChanged="RgbSlider_ValueChanged"/>
                        <TextBlock x:Name="BlueValue" Grid.Row="2" Grid.Column="2" Text="238" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 按钮区域 -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Content="应用" 
                    Width="100" 
                    Height="35" 
                    Margin="0,0,10,0"
                    Click="ApplyButton_Click"
                    Background="{DynamicResource PrimaryBrush}"
                    Foreground="White"
                    BorderThickness="0"
                    FontWeight="SemiBold"
                    Cursor="Hand">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="5" 
                                Padding="10,5"
                                x:Name="border">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.9"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
           
        </StackPanel>
    </Grid>
</Window>
